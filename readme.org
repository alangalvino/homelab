#+TITLE: Homelab Documentation

* Overview
[[https://github.com/alangalvino/homelab/raw/main/.static/images/homelab.png]]

This homelab consists of: 
  - Three Mac Mini nodes running Proxmox VE
  - Synology NAS for shared storage
  - Kubernetes cluster on top of talos
  - Apps deployed on top of Kubernetes (exceptions are Home Assistant
    running as VM)
  - Entire environment configured with Ansible, Terraform, Helm and Kustomize for full automation
* Hardware Summary
| Node         | CPU                       | RAM   | Storage                           | Role                                                       |
|--------------+---------------------------+-------+-----------------------------------+------------------------------------------------------------|
| Mac Mini #1  | Intel Core i5-4278U       | 8 GB  | 1 TB HDD                          | Proxmox node running: Kubernetes Control Plane on Talos VM |
| Mac Mini #2  | Intel Core i5-4260U       | 16 GB | 500 GB SSD                        | Proxmox node running: Kurbentes Worker on Talos VM         |
| Mac Mini #3  | Intel Core i5-4260U       | 16 GB | 500 GB SSD                        | Proxmox node running: Kurbentes Worker on Talos VM         |
| Synology NAS | Realtek RTD1296 Quad-Core | 2 GB  | 4 x 4TB HDD in SHR2 (≈8TB usable) | Synology NAS DS418                                         |
* Networking
** Overview
- All VMs and containers share the subnet: 192.168.50.0/24
- Static IP allocations separate hosts, VMs, and containers for clarity
** Static IP Addressing Scheme
| Device/Service            |     IP Address |
|---------------------------+----------------|
| Synology NAS              |  192.168.50.10 |
| Mac Mini #1 (Proxmox)     |  192.168.50.11 |
| Mac Mini #2 (Proxmox)     |  192.168.50.12 |
| Mac Mini #3 (Proxmox)     |  192.168.50.13 |
| Kubernetes Master         |  192.168.50.21 |
| Kubernetes Worker #1      |  192.168.50.22 |
| Kubernetes Worker #2      |  192.168.50.23 |
| Alpine Backup Server      |  192.168.50.24 |
| Home Assistant            |  192.168.40.25 |
| Homepage (Static site)    | 192.168.50.100 |
| Pi-hole (DNS)             | 192.168.50.101 |
| Immich (Image storage)    | 192.168.50.103 |
| Paperless-ngx (Documents) | 192.168.50.104 |
| Nextcloud (Backup sync)   | 192.168.50.105 |
* Physical Layer
** Proxmox Cluster
*** Proxmox pve1
- hostname: pve1.home.arpa
- ip: 192.168.50.11
- url: https://192.168.50.11:8006
- hardware:
  - model: Mac Mini 
  - CPU: Intel Core i5-4278U CPU @ 2.60GHz
  - RAM: 8 GB
  - Storage: 1 TB HDD
*** Proxmox pve2
- hostname: pve2.home.arpa
- ip: 192.168.50.12
- url: https://192.168.50.12:8006
- hardware:
  - model: Mac Mini #2
  - CPU: Intel Core i5-4260U CPU @ 1.40GHz
  - RAM: 16 GB
  - Storage: 500 GB SSD
*** Proxmox pve3
- hostname: pve3.home.arpa
- ip: 192.168.50.13
- url: https://192.168.50.13:8006
- hardware:
  - model: Mac Mini #3
  - CPU: Intel Core i5-4260U CPU @ 1.40GHz
  - RAM: 16 GB
  - Storage: 500 GB SSD
** NAS
*** Overview
- hostname: nas.home.arpa
- ip: 192.168.50.10
- hardware (Synology NAS DS418):
  - CPU: Realtek RTD1296 Quad-Core
  - RAM: 2 GB
  - Storage: 4 x 4TB HDD (SHR2 ≈8TB usable)
*** NFS File Layout
#+BEGIN_SRC text :exports both :results verbatim
/volume1/
├── homelab/
│   ├── apps/
│   ├── proxmox/
│   ├── terraform/
│   └── kubernetes/
├── users/
├── backups/
└── public/
#+END_SRC
